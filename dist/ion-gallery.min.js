!function(){"use strict";function e(e,n,t){function i(e){var i=parseInt(e.ionGalleryRowSize);e.ionSelectionMode=!1;var l=function(){e.ionGalleryRowSize=n.getRowSize(i||t.row_size,e.ionGalleryItems.length),e.actionLabel=t.action_label,e.responsiveGrid=parseInt(1/e.ionGalleryRowSize*100),n.addPositionToImages(e.ionGalleryItems),e.ionGallerySelectedItems=[],e.cancelLabel=t.cancel_label,e.elementsSelectedLabel=t.elements_selected_label,e.selectAllLabel=t.select_all_label,e.unselectAllLabel=t.unselect_all_label,e.ionSliderMaxZoom=e.ionSliderMaxZoom||3};l(),function(){e.$watch(function(){return e.ionGalleryItems.length},function(e,n){e!==n&&l()})}(),e.activateSelectionMode=function(){e.ionSelectionMode||(e.unselectAll(),e.ionSelectionMode=!0)},e.cancelSelectionMode=function(){e.unselectAll(),e.ionSelectionMode=!1},e.toggleSelection=function(t){n.toggleItemSelection(t,e.ionGallerySelectedItems)},e.selectAll=function(){n.selectAllItems(e.ionGalleryItems,e.ionGallerySelectedItems)},e.unselectAll=function(){n.unselectAllItems(e.ionGalleryItems,e.ionGallerySelectedItems)}}function l(e,n,i){e.customItemAction=angular.isFunction(e.ionItemAction)&&i.hasOwnProperty("ionItemAction"),e.ionSliderToggle="false"!==i.ionGalleryToggle&&t.toggle}return i.$inject=["$scope"],{restrict:"AE",scope:{ionGalleryItems:"=ionGalleryItems",ionGalleryRowSize:"=?ionGalleryRow",ionItemAction:"&?ionItemAction",ionZoomEvents:"=?ionZoomEvents",ionSelectionModeActions:"=ionSelectionModeActions",ionSliderMaxZoom:"=?ionSliderMaxZoom"},controller:i,link:l,replace:!0,templateUrl:t.template_gallery}}angular.module("ion-gallery",["templates"]).directive("ionGallery",e),e.$inject=["$ionicPlatform","ionGalleryHelper","ionGalleryConfig"]}(),function(){"use strict";function e(){this.config={action_label:"Done",template_gallery:"gallery.html",template_slider:"slider.html",toggle:!0,row_size:3,fixed_row_size:!0,zoom_events:!0,cancel_label:"Cancel",elements_selected_label:"selected",select_all_label:"Select all",unselect_all_label:"Unselect all"},this.$get=function(){return this.config},this.setGalleryConfig=function(e){angular.extend(this.config,this.config,e)}}angular.module("ion-gallery").provider("ionGalleryConfig",e),e.$inject=[]}(),function(){"use strict";function e(e){this.getRowSize=function(n,t){var i;return i=isNaN(n)===!0||n<=0?e.row_size:n>t&&!e.fixed_row_size?t:n},this.buildGallery=function(e,n){for(var t=[],i=-1,l=0,o=0;o<e.length;o++)o%n===0&&(i++,t[i]=[],l=0),e[o].position=o,t[i][l]=e[o],l++;return t},this.addPositionToImages=function(e){for(var n=0;n<e.length;n++)e[n].position=n},this.toggleItemSelection=function(e,n){e.selected=!e.selected;var t=n.indexOf(e);t!=-1?n.splice(t,1):n.push(e)},this.selectAllItems=function(e,n){n.length=0;for(var t=0;t<e.length;t++)e[t].selected=!0,n.push(e[t])},this.unselectAllItems=function(e,n){n.length=0;for(var t=0;t<e.length;t++)e[t].selected=!1}}angular.module("ion-gallery").service("ionGalleryHelper",e),e.$inject=["ionGalleryConfig"]}(),function(){"use strict";function e(){function e(e,n,t){var i=function(e,t){t>0&&(e.naturalHeight>=e.naturalWidth?n.attr("width","100%"):n.attr("height",n.parent()[0].offsetHeight+"px"))};n.bind("load",function(t){var l=this;n.parent()[0].offsetHeight>0&&i(this,n.parent()[0].offsetHeight),e.$watch(function(){return n.parent()[0].offsetHeight},function(e){i(l,e)})})}return{restrict:"A",link:e}}angular.module("ion-gallery").directive("ionImageScale",e),e.$inject=[]}(),function(){"use strict";function e(e){function n(e,n,t){e.$watch(function(){return e.ionGalleryRowSize},function(t,i){t>0&&n.css("height",n[0].offsetWidth*parseInt(e.responsiveGrid)/100+"px")})}return{restrict:"A",link:n}}angular.module("ion-gallery").directive("ionRowHeight",e),e.$inject=["ionGalleryConfig"]}(),function(){"use strict";function e(e,n){function t(t,i,l){var o=!1,s=function(){t.$emit("ZoomStarted")},a=function(e){o=!0,n(function(){o=!1,t.$emit("DoubleTapEvent",{x:e.gesture.touches[0].pageX,y:e.gesture.touches[0].pageY})},200)},c=function(e){o!==!0&&n(function(){o!==!0&&t.$emit("TapEvent")},200)},r=e.on("pinch",s,i),d=e.on("doubletap",function(e){a(e)},i),u=e.on("tap",c,i);t.$on("$destroy",function(){e.off(d,"doubletap",a),e.off(u,"tap",c),e.off(r,"pinch",s)})}return{restrict:"A",link:t}}angular.module("ion-gallery").directive("ionSlideAction",e),e.$inject=["$ionicGesture","$timeout"]}(),function(){"use strict";function e(e,n,t,i,l,o){function s(e){var o,s,a=(e.ionGalleryRowSize,!1);e.selectedSlide=1,e.hideAll=!1,e.ionZoomEvents=l.setZoomEvents(e.ionZoomEvents),e.openSlider=function(n){e.slides=[],s=n;var t=e.ionGalleryItems.length,l=n-1<0?t-1:n-1,a=n+1>=t?0:n+1;e.slides[0]=e.ionGalleryItems[l],e.slides[1]=e.ionGalleryItems[n],e.slides[2]=e.ionGalleryItems[a],o=1,i.slide(1),e.openModal()},e.slideChanged=function(n){if(n!==o){var i,l=e.slides.length-o-n,a=e.ionGalleryItems.length,c=o+">"+n;"0>1"===c||"1>2"===c||"2>0"===c?(s++,s>=a&&(s=0),i=s+1,i>=a&&(i=0)):"0>2"!==c&&"1>0"!==c&&"2>1"!==c||(s--,s<0&&(s=a-1),i=s-1,i<0&&(i=a-1)),e.ionZoomEvents===!0&&t.$getByHandle("slide-"+l).zoomTo(1),e.slides[l]=e.ionGalleryItems[i],o=n}};var c=function(){a=!0,e.hideAll=!0,i.enableSlide(!1)},r=function(){a=!1,e.hideAll=!1,i.enableSlide(!0)};e.$on("ZoomStarted",function(e){n(function(){c()})}),e.$on("TapEvent",function(e){n(function(){d()})}),e.$on("DoubleTapEvent",function(e,t){n(function(){u(t)})});var d=function(){return a===!0?(e.ionZoomEvents===!0&&t.$getByHandle("slide-"+o).zoomTo(1,!0),void r()):void(e.hasOwnProperty("ionSliderToggle")&&e.ionSliderToggle===!1&&e.hideAll===!1||a===!0||(e.hideAll=!e.hideAll))},u=function(n){a===!1?(e.ionZoomEvents===!0&&t.$getByHandle("slide-"+o).zoomTo(e.ionSliderMaxZoom,!0,n.x,n.y),c()):d()}}function a(n,t,i){var l;e.fromTemplateUrl(o.template_slider,{scope:n,animation:"fade-in"}).then(function(e){l=e}),n.openModal=function(){l.show()},n.closeModal=function(){l.hide()},n.$on("$destroy",function(){try{l.remove()}catch(e){}})}return s.$inject=["$scope"],{restrict:"A",controller:s,link:a}}angular.module("ion-gallery").directive("ionSlider",e),e.$inject=["$ionicModal","$timeout","$ionicScrollDelegate","$ionicSlideBoxDelegate","ionSliderHelper","ionGalleryConfig"]}(),function(){"use strict";function e(e){this.setZoomEvents=function(n){return n===!1&&(e.zoom_events=!1),e.zoom_events}}angular.module("ion-gallery").service("ionSliderHelper",e),e.$inject=["ionGalleryConfig"]}(),angular.module("templates",[]).run(["$templateCache",function(e){e.put("gallery.html",'<div class="gallery-view">\n\n\t<ion-header-bar align-title="left" class="bar-subheader bar-stable" ng-show="ionSelectionMode">\n\t\t<div class="buttons">\n\t\t\t<button class="button" ng-click="cancelSelectionMode()">{{:: cancelLabel}}</button>\n\t\t</div>\n\t\t<h1 class="title">{{ionGallerySelectedItems.length}} {{:: elementsSelectedLabel}}</h1>\n\t\t<div class="buttons">\n\t\t\t<button class="button" ng-click="selectAll()" ng-if="ionGallerySelectedItems.length < ionGalleryItems.length">{{:: selectAllLabel}}</button>\n\t\t\t<button class="button" ng-click="unselectAll()" ng-if="ionGallerySelectedItems.length >= ionGalleryItems.length">{{:: unselectAllLabel}}</button>\n\t\t</div>\n\t</ion-header-bar>\n\n\t<ion-content class="has-header" ng-class="{\'has-subheader has-footer\': ionSelectionMode}">\n\t\t<div class="row unlimited-cols" ng-class="\'row-size-\' + ionGalleryRowSize" ion-row-height>\n\t\t\t<div class="col image-container" ng-class="{\'selected\': item.selected}" ng-repeat="item in ionGalleryItems track by $index">\n\t\t\t\t<img ion-image-scale ng-src="{{item.thumb || item.src}}" on-hold="activateSelectionMode();toggleSelection(item);" ng-click="ionSelectionMode? toggleSelection(item) : customItemAction? ionItemAction({item: item}) : openSlider(item.position)">\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div ion-slider></div>\n\t</ion-content>\n\n\t<ion-footer-bar class="bar-stable" ng-show="ionSelectionMode && ionSelectionModeActions.length">\n\t\t<div class="buttons">\n\t\t\t<button ng-repeat="action in ionSelectionModeActions track by $index" ng-click="action.buttonAction(ionGallerySelectedItems)"\n\t\t\t\tclass="button button-icon icon-top">\n\t\t\t\t<i class="icon" ng-class="action.buttonIcon"></i>\n\t\t\t\t<span>{{:: action.buttonLabel}}</span>\n\t\t\t</button>\n\t\t</div>\n\t</ion-footer-bar>\n\n</div>'),e.put("slider.html",'<ion-modal-view class="imageView">\n  <ion-header-bar class="headerView" ng-show="!hideAll">\n    <button class="button button-outline button-light close-btn" ng-click="closeModal()">{{::actionLabel}}</button>\n  </ion-header-bar>\n\n  <ion-content class="has-no-header" scroll="false">\n    <ion-slide-box does-continue="true" active-slide="selectedSlide" show-pager="false" class="listContainer" on-slide-changed="slideChanged($index)">\n      <ion-slide ng-repeat="single in slides track by $index">\n        <ion-scroll direction="xy"\n                    locking="false"\n                    zooming="{{ionZoomEvents}}"\n                    min-zoom="1"\n                    max-zoom="{{ionSliderMaxZoom}}"\n                    scrollbar-x="false"\n                    scrollbar-y="false"\n                    ion-slide-action\n                    delegate-handle="slide-{{$index}}"\n                    overflow-scroll="false">\n        <div class="item item-image gallery-slide-view">\n          <img ng-src="{{single.src}}">\n        </div>\n        <div ng-if="single.sub && single.sub.length > 0" class="image-subtitle" ng-show="!hideAll">\n            <span ng-bind-html=\'single.sub\'></span>\n        </div>\n        </ion-scroll>\n      </ion-slide>\n    </ion-slide-box>\n  </ion-content>\n</ion-modal-view>\n')}]);